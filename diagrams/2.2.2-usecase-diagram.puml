@startuml
'
' Översikt: Detaljerad spelarinteraktion och spelmekanik
' Detta diagram fokuserar på spelarens användarfall med detaljer:
' - UC2 Navigera: Uppdelat i mobil (joystick) vs desktop (tangentbord) kontroller
'   Inkluderar fog of war (begränsad viewport)
' - UC4 Förmågor: Fyra typer med olika effekter och cooldowns:
'   * Stun Shot (10s cooldown): Fryser 2s, tappar nyckel
'   * Förvirringsstrål: Inverterar kontroller
'   * Placera fälla: Aktiveras när motståndare går över
'   * Hastighetsökning: Auto-aktiveras vid insamling
' - UC5 Nå utgång: Kräver nyckel (include), följs av valfri high score (extend)
'
left to right direction
skinparam actorStyle awesome

actor "Spelare" as Player

rectangle "Spelmekanik" {
  usecase "UC1: Anslut via QR-kod" as UC1
  usecase "UC2: Navigera labyrint" as UC2
  usecase "UC3: Samla nyckel" as UC3
  usecase "UC4: Använd förmågor" as UC4
  usecase "UC5: Nå utgång" as UC5
  usecase "UC6: Ange high score" as UC6

  ' Sub-Use Cases för UC2
  usecase "UC2.1: Rörelse (mobil)" as UC2_1
  usecase "UC2.2: Rörelse (desktop)" as UC2_2
  usecase "UC2.3: Se begränsad viewport" as UC2_3
  
  ' Sub-Use Cases för UC4
  usecase "UC4.1: Stun Shot" as UC4_1
  usecase "UC4.2: Förvirringsstrål" as UC4_2
  usecase "UC4.3: Placera fälla" as UC4_3
  usecase "UC4.4: Hastighetsökning" as UC4_4

  Player --> UC1
  Player --> UC2
  Player --> UC3
  Player --> UC4
  Player --> UC5
  Player --> UC6

  ' Generalizations
  UC2 <|-- UC2_1
  UC2 <|-- UC2_2
  UC2 ..> UC2_3 : <<include>>
  
  UC4 <|-- UC4_1
  UC4 <|-- UC4_2
  UC4 <|-- UC4_3
  UC4 <|-- UC4_4
  
  ' Dependencies
  UC5 ..> UC3 : <<include>>
  UC5 ..> UC6 : <<extend>>
}

note right of UC2_1
  Touch-kontroller:
  Vänster joystick för rörelse
  Höger knappar för förmågor
end note

note right of UC2_3
  Fog of war-effekt.
  Spelare ser endast
  cirkulärt område runt sig.
end note

note bottom of UC4_1
  Fryser motståndare 2s.
  Tvingar tappa nyckel.
  Cooldown: 10s
end note

@enduml